!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=window.ReactRouterDOM.Redirect,a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={redirect:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"componentDidMount",value:function(){this.logOut()}},{key:"logOut",value:function(){var e=this,t=this.props.getFromStorage("MERN_Vote").username;fetch("/logout?username="+t).then(function(e){return e.json()}).then(function(t){t.success&&(e.props.setSignInInfo("","","","",!1),e.props.removeFromStorage("MERN_Vote"),e.setState({redirect:!0}))})}},{key:"render",value:function(){return this.state.redirect?React.createElement(o,{to:"/"}):React.createElement("div",null,"Logging out.")}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=window.ReactRouterDOM.Redirect,a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={userName:"",password:"",redirect:!1,isError:!1,isLoading:!1},e.handleSubmit=e.handleSubmit.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isLoading:!0});var n=document.forms.login,r={userName:n.userName.value,password:n.password.value};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){e.success?(t.props.setInStorage("MERN_Vote",{token:e.token,name:e.name,password:e.password,username:e.username}),t.props.setSignInInfo(e.name,e.userName,e.password,e.token,!0),t.setState({isLoading:!1}),t.setState({redirect:!0})):(t.setState({isError:e.error}),t.setState({isLoading:!1}),console.log(e.message))})}},{key:"render",value:function(){var e=this.stateisError,t=this.state.redirect;return this.state.isLoading?React.createElement("div",null," Loading... "):e?React.createElement("div",null," Error Logging in, please try again. "):t?React.createElement(o,{to:"/"}):React.createElement("div",null,React.createElement("form",{name:"login",onSubmit:this.handleSubmit,autoComplete:"on"},React.createElement("legend",null,"Log In"),React.createElement("p",null,React.createElement("label",{htmlFor:"userName"},"Username"),React.createElement("input",{required:!0,type:"text",name:"userName",placeholder:"Username",onChange:this.handleChange,autoComplete:"username"})),React.createElement("p",null,React.createElement("label",{htmlFor:"password"},"Password"),React.createElement("input",{required:!0,type:"password",name:"password",placeholder:"******",onChange:this.handleChange,autoComplete:"current-password"})),React.createElement("p",null,React.createElement("input",{type:"submit"}))))}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=window.ReactRouterDOM.Redirect,a=window.ReactRouterDOM.Link,i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={name:"",userName:"",password:"",passwordConfirm:"",redirect:!1,isLoading:!1,duplicateUser:!1},e.handleSubmit=e.handleSubmit.bind(e),e.handleChange=e.handleChange.bind(e),e.retrySignUp=e.retrySignUp.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isLoading:!0});var n={name:this.state.name,userName:this.state.userName,password:this.state.password,passwordConfirm:this.state.passwordConfirm};fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){e.ok?e.json().then(function(e){"Error: Account already exists."===e.message?t.setState({duplicateUser:!0}):(t.setState({isLoading:!1}),t.setState({redirect:!0}))}):e.json().then(function(e){alert("failed to create new user"+e)})}).catch(function(e){alert("error communicating to back end"+e)})}},{key:"retrySignUp",value:function(){this.setState({duplicateUser:!1,isLoading:!1})}},{key:"handleChange",value:function(e){switch(e.target.name){case"name":this.setState({name:e.target.value});break;case"userName":this.setState({userName:e.target.value});break;case"password":this.setState({password:e.target.value});break;case"passwordConfirm":this.setState({passwordConfirm:e.target.value})}}},{key:"render",value:function(){var e=this.state.duplicateUser,t=this.state.redirect,n=this.state.isLoading;return e?React.createElement("div",null,React.createElement("p",null,"User already exists, select a new username."),React.createElement(a,{to:"/sign-up",onClick:this.retrySignUp},"Sign Up")):n?React.createElement("div",null,React.createElement("p",null,"Loading...")):t?React.createElement(o,{to:"/"}):React.createElement("div",null,React.createElement("form",{name:"signup",onSubmit:this.handleSubmit,autoComplete:"on"},React.createElement("legend",null,"Sign Up"),React.createElement("p",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement("input",{required:!0,type:"text",name:"name",placeholder:"First and Last",onChange:this.handleChange})),React.createElement("p",null,React.createElement("label",{htmlFor:"userName"},"Username"),React.createElement("input",{required:!0,type:"text",name:"userName",placeholder:"Username",onChange:this.handleChange})),React.createElement("p",null,React.createElement("label",{htmlFor:"password"},"Password"),React.createElement("input",{required:!0,type:"password",name:"password",placeholder:"******",onChange:this.handleChange,autoComplete:"new password"})),React.createElement("p",null,React.createElement("label",{htmlFor:"passwordConfirm"},"Confirm Password"),React.createElement("input",{required:!0,type:"password",name:"passwordConfirm",placeholder:"******",onChange:this.handleChange,autoComplete:"new password"})),React.createElement("p",null,React.createElement("input",{type:"submit"}))))}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return React.createElement("div",null,"Page not found",React.createElement("a",{href:"/"},"Return Home"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={pollShown:0,options:[],values:[],questions:[],answers:[]},e.createUpdatedPoll=e.createUpdatedPoll.bind(e),e.handleSubmit=e.handleSubmit.bind(e),e.updatePoll=e.updatePoll.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"createUpdatedPoll",value:function(e){var t=this.state.pollShown;for(var n in t.options)n===e&&t.options[e]++;return t}},{key:"updatePoll",value:function(e){var t=this;fetch("/updatePoll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.ok?e.json().then(function(e){t.props.loadData()}):e.json().then(function(e){alert("failed to update issue "+e)})}).catch(function(e){alert("error communicating to back end"+e)})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.forms.updatedPoll.updatedValue.value,n=this.createUpdatedPoll(t);this.updatePoll(n)}},{key:"render",value:function(){return React.createElement("div",{className:"pollResult"},React.createElement("div",{className:"pollInfo"},this.state.pollShown.question,React.createElement("hr",null),"Choose one.",React.createElement("form",{name:"updatedPoll",onSubmit:this.handleSubmit},this.state.options,React.createElement("input",{type:"submit"})),this.state.values),React.createElement("div",{className:"pollInfo"},React.createElement(Chart,{questions:this.state.questions,answers:this.state.answers})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.match.params.pollId,r=e.polls.find(function(e){return e._id===n}),o=[],a=[],i=[],l=[];for(var c in r.options)o.push(React.createElement("label",{key:c},c,React.createElement("input",{type:"radio",name:"updatedValue",value:c}))),a.push(React.createElement("li",{key:c},c,": ",r.options[c])),i.push(c),l.push(r.options[c]);return{pollShown:r,options:o,answers:l,questions:i,values:a}}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleSubmit=e.handleSubmit.bind(e),e.createPoll=e.createPoll.bind(e),e.parseOptions=e.parseOptions.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"createPoll",value:function(e){var t=this;fetch("newPoll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.ok?e.json().then(function(e){t.props.loadData()}):e.json().then(function(e){alert("failed to add issue"+e)})}).catch(function(e){alert("error communicating to back end"+e)})}},{key:"parseOptions",value:function(e){var t={};return e.split(",").map(function(e){t[e]=0}),t}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.forms.newPoll;this.createPoll({question:t.question.value,options:this.parseOptions(t.options.value)}),t.question.value="",t.options.value=""}},{key:"render",value:function(){return React.createElement("div",{className:"newPoll",onSubmit:this.handleSubmit},React.createElement("form",{name:"newPoll"},React.createElement("label",null,"Question"),React.createElement("input",{name:"question"}),React.createElement("label",null,"Options"),React.createElement("input",{name:"options",placeholder:"seperate by a comma"}),React.createElement("button",null,"Sumbit")))}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();window.ReactRouterDOM.BrowserRouter,window.ReactRouterDOM.Route;var o=window.ReactRouterDOM.Link,a=(window.ReactRouterDOM.Prompt,window.ReactRouterDOM.Switch,window.ReactRouterDOM.Redirect,function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){var e=this.props.polls.slice().map(function(e){return React.createElement(o,{key:e._id,to:"/pollFound/"+e._id}," ",e.question," ")});return React.createElement("div",{className:"mainBlockBackground"},React.createElement("div",{className:"mainBlock mainDiv"},React.createElement("h1",null,"Mern Vote"),React.createElement("h3",null,"Create custom polls with live results."),e),React.createElement("div",{className:"logInArea mainDiv"},"Log in Area"))}}]),t}());t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();window.ReactRouterDOM.BrowserRouter,window.ReactRouterDOM.Route;var o=window.ReactRouterDOM.Link,a=(window.ReactRouterDOM.Prompt,window.ReactRouterDOM.Switch,window.ReactRouterDOM.Redirect,function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={signInUsername:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e="";this.props.signInName&&(e=React.createElement("p",{className:"links"},"Welcome ",this.props.signInName));var t=void 0;return t=this.props.userIsLoggedIn?React.createElement(o,{className:"links",to:"/log-out"}," Logout"):React.createElement("div",null,React.createElement(o,{className:"links",to:"/sign-up"},"Sign Up /"),React.createElement(o,{className:"links",to:"/log-in"}," Login")," "),React.createElement("div",{className:"navbar"},React.createElement("div",{className:"navSpacing"},React.createElement("div",{className:"leftLinks"},React.createElement("a",{href:"/",className:"links"},"Home /"),React.createElement(o,{to:"/newPoll",className:"links"},"  New Poll")),e,React.createElement("div",{className:"rightLinks"},t)))}}]),t}());t.default=a},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=m(n(7)),i=m(n(6)),l=m(n(5)),c=m(n(4)),u=m(n(3)),s=m(n(2)),p=m(n(1)),f=m(n(0));function m(e){return e&&e.__esModule?e:{default:e}}var d=window.ReactRouterDOM.BrowserRouter,h=window.ReactRouterDOM.Route,b=(window.ReactRouterDOM.Link,window.ReactRouterDOM.Prompt,window.ReactRouterDOM.Switch),y=(window.ReactRouterDOM.Redirect,function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={polls:[],signInName:"",signInUsername:"",signInPassword:"",token:"",userIsLoggedIn:!1},e.loadData=e.loadData.bind(e),e.setSignInInfo=e.setSignInInfo.bind(e),e.setInStorage=e.setInStorage.bind(e),e.removeFromStorage=e.removeFromStorage.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),o(t,[{key:"componentDidMount",value:function(){this.loadData();var e=this.getFromStorage("MERN_Vote");this.getFromStorage("MERN_Vote")&&this.setState({signInName:e.name,signInUsername:e.username,signInPassword:e.password,token:e.token,userIsLoggedIn:!0})}},{key:"loadData",value:function(){var e=this;fetch("/polls").then(function(e){return e.json()}).then(function(t){var n=[];t.polls.forEach(function(e){return n.push(e)}),console.log("Got "+t.polls.length+" polls from the server"),e.setState({polls:n})})}},{key:"getFromStorage",value:function(e){try{var t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){return null}}},{key:"setInStorage",value:function(e,t){t||console.error("Token is missing");try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}},{key:"removeFromStorage",value:function(e){localStorage.removeItem(e)}},{key:"setSignInInfo",value:function(e,t,n,r,o){this.setState({signInName:e,signInUsername:t,signInPassword:n,token:r,userIsLoggedIn:o})}},{key:"render",value:function(){var e=this;return React.createElement(d,null,React.createElement("div",null,React.createElement(b,null,React.createElement(h,{exact:!0,path:"/",render:function(t){return React.createElement(i.default,r({},t,{polls:e.state.polls}))}}),React.createElement(h,{path:"/pollFound/:pollId",render:function(t){return React.createElement(c.default,r({},t,{polls:e.state.polls,loadData:e.loadData}))}}),React.createElement(h,{path:"/newPoll",render:function(t){return React.createElement(l.default,r({},t,{loadData:e.loadData}))}}),React.createElement(h,{path:"/sign-up",component:s.default}),React.createElement(h,{path:"/log-in",render:function(t){return React.createElement(p.default,r({},t,{setSignInInfo:e.setSignInInfo,setInStorage:e.setInStorage}))}}),React.createElement(h,{path:"/log-out",render:function(t){return React.createElement(f.default,r({},t,{getFromStorage:e.getFromStorage,setSignInInfo:e.setSignInInfo,removeFromStorage:e.removeFromStorage}))}}),React.createElement(h,{component:u.default})),React.createElement(h,{render:function(t){return React.createElement(a.default,r({},t,{signInName:e.state.signInName,userIsLoggedIn:e.state.userIsLoggedIn}))}})))}}]),t}());ReactDOM.render(React.createElement(y,null),document.getElementById("app"))},function(e,t,n){e.exports=n(8)}]);